---
title: "Midterm 1 Notes"
output: html_document
date: "2025-02-04"
---

```{r message=FALSE, warning=FALSE}
library(tidyverse)
library(janitor)
msleep <- msleep
clean_names(msleep)
```
Before we do anything with our data, we have to load it.
```{r}
dataexample <- read_csv("/data/dataexample.csv")
```

Summary functions, such as summary() and glimpse() can provide early insights into the data.

```{r}
glimpse(msleep)
```
```{r}
summary(msleep)
```
We can use dplyr functions to manipulate our data and to select items of interest.

Select is used to choose which columns to display.
```{r}
msleep %>% 
  select(name, vore) #only displays the name and vore columns
```
Filter is used to choose certain entries within columns.
```{r}
msleep %>% 
  filter(vore == "carni") #filters all carnivores
```
Within filter, we use == for equal, and != for does not equal.
```{r}
msleep %>%
  filter(vore != "carni") #filters out all carnivores
```
We use & for and. We use | for or. We can use between(column, x, y) to filter values between two chosen numbers.
```{r}
msleep %>% 
  filter(vore == "carni" | vore == "herbi") #filters all carnivores and herbivores
```
```{r}
msleep %>% 
  filter(between(sleep_total, 10, 12)) #filters all animals that sleep between 10 and 12 hours total each day.
```

We can use count() or tabyl() to give a count of how many of each entry there are for a specified column.
```{r}
msleep %>% 
count(vore)
```
```{r}
msleep %>% 
  tabyl(vore)
```
We use summarize() in tandem with group_by() to do many powerful things.
```{r}
msleep %>% 
  summarize(n_vore = n_distinct(vore, na.rm = T)) #tells us how many distinct entries there are for the vore column while also    excluding NAs
```
```{r}
msleep %>% 
  group_by(vore) %>% 
  summarize(average_sleep_vore = mean(sleep_total, na.rm = T), n = n()) #this groups by vore and then calculates the mean sleep total and puts it into a new column called average_sleep_vore. It also displays the total n for each category using n = n().
```
We can even group by multiple variables at once.
```{r}
msleep %>% 
  group_by(vore, conservation) %>% 
  summarize(average_bodywt_vore_conservation = mean(bodywt, na.rm = T), n = n())
```

We can create new variables by manipulating current ones using mutate()
```{r}
msleep %>% 
  select(name, sleep_total) %>% 
  mutate(sleep_total_min = sleep_total * 60) #creates a new variable called sleep_total_min that converts sleep_total from hours   to minutes.
```
We can even select what we want to mutate within a variable using ifelse()
```{r}
msleep %>% 
  select(name, sleep_total) %>% 
  mutate(sleep_designation = ifelse(10 < sleep_total, "lazy bum", "productive member of society"))
```
We can use arrange() to display tables in a specified order.
```{r}
msleep %>% 
  arrange(-sleep_total) #arranges in descending order for sleep_total
```
We can use across() to make more efficient code.
```{r}
msleep %>% 
  summarize(mean_sleep_total = mean(sleep_total, na.rm = T),
            mean_body_wt = mean(bodywt, na.rm = T),
            mean_brain_wt = mean(brainwt, na.rm = T), n = n()) #this is a lot
```
```{r}
msleep %>% 
  summarize(across(c(sleep_total, bodywt, brainwt), \(x) mean(x, na.rm = T)))
```
There are other tools we can use to make this even easier.
```{r}
msleep %>% 
  summarize(across(where(is.numeric), \(x) mean(x, na.rm = T))) #this calculates the mean of all numerics.
```
```{r}
msleep %>% 
  summarize(across(contains("wt"), \(x) mean(x, na.rm = T))) #this calculates the mean of all variables that contain "wt" in them.
```
We can even do multiple calculations at once using list()
```{r}
msleep %>% 
  summarize(across(contains("wt"), list(mean=\(x) mean(x, na.rm = T), sd=\(x) sd(x, na.rm = T)))) #gives us both the mean and standard deviation of variables containing "wt"
```





















